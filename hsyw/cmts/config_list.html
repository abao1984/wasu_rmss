<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="zh-cn" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/hsyw/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/hsyw/bootstrap/css/bootstrap-theme.min.css">
<script src="/hsyw/jquery-ui/jquery-1.10.2.js"></script>
<script src="/hsyw/bootstrap/js/bootstrap.min.js"></script>
<script src="/hsyw/jquery-ui/jquery-1.10.2.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script>
<script src="/hsyw/bootstrap/notify.min.js"></script>
<style>
body {
  padding-top: 50px;
}
</style>
<script>
    $(function () {
		function searchConfigList(bussiness_code,client,device_info)
		{
			var post_dict = {};
			post_dict['bussiness_code'] = bussiness_code;
			post_dict['client'] = client;
			post_dict['device_info'] = device_info;
			
			$.post('/hsyw/ws.asmx/get_config_list', post_dict)
			.done(function (result) {
				var json_obj = JSON.parse(result);
				$('#id_configure_table tr').remove();
				var html_header = '<tr>'+
					'<th>选择</th>'+
					'<th>业务编码</th>'+
					'<th>设备配置信息</th>'+
					'<th>客户名称</th>'+
					'</tr>';
				$('#id_configure_table').append(html_header);
				$.each(json_obj, function (index, value) {
					var id = value['ID']
					var bussiness_code = value['Bussiness_code'];
					var device_code = value['sbpzxx'];
					var client_name = value['khmc'];
					var tr_html = '' +
						'<tr>' +
						'<td><input type="checkbox" name="check[]" id="' + id + '"></td>' +
						'<td><a href="/hsyw/cmts/config_detail.html?id=' + id + '">' + bussiness_code + '</a></td>' +
						'<td>' + device_code + '</td>' +
						'<td>' + client_name + '</td>' +
						'</tr>';
					$('#id_configure_table').append(tr_html);
				});
			});
		}
		function doSearch()
		{
			var bcode = $('#id_code').val();
			var client = $('#id_client').val();
			var device_info = $('#id_device_info').val();
			searchConfigList(bcode, client,device_info);
		}
		
		doSearch();
		$('#id_search').click(function(){
			doSearch();
		});
		
		$('#id_add_config').click(function(){
			var host =location.hostname;
			var port =location.port;
			var url = 'http://'+ host + ':' + port + '/hsyw/cmts/add_config.html';
			window.location = url;
		});
		
		
		
	}); 
</script>
</head>
<body>
<div class="container">
<div class="row">
<div class="col-xs-12">
<form id="form1" role="form" class="form-inline" >
<div class="form-group">
<label class="sr-only" for="id_code">业务编码</label>
<input class="form-control" type="text" placeholder="业务编码" name="code" id="id_code">
</div>
<!--
<div class="form-group">
<label class="sr-only" for="id_bussiness_type">业务类型</label>
<input class="form-control" type="text" placeholder="业务类型" name="bussiness_type" id="id_bussiness_type">
</div>
<div class="form-group">
<label class="sr-only" for="id_unit">接入单位</label>
<input class="form-control" type="text" placeholder="接入单位" name="unit" id="id_unit">
</div>
-->
<div class="form-group">
<label class="sr-only" for="id_client">用户名称</label>
<input class="form-control" type="text" placeholder="用户名称" name="address" id="id_client">
</div>

<div class="form-group">
<label class="sr-only" for="id_device_info">设备配置信息</label>
<input class="form-control" type="text" placeholder="设备配置信息" name="device_info" id="id_device_info">
</div>
<!--
<div class="form-group">
<label class="sr-only" for="id_area">所属区域</label>
<select class="form-control" name="area" id="id_area">
<option>-------所属区域-------</option>
</select>
</div>
<div class="form-group">
<label class="sr-only" for="id_client_lv">客户级别</label>
<select class="form-control" name="client_lv" id="id_client_lv">
<option>-------客户级别-------</option>
</select>
</div>
-->
<button type="button" class="btn btn-primary" id="id_search">查询</button>
<hr>
<button class="btn btn-default" id="id_add_config" type="button">新增</button>
<button type="button" class="btn btn-danger" id="id_delete_config">删除</button>
<button class="btn btn-info" type="button">导入</button>
</form>
<p></p>
<table id="id_configure_table" class="table table-hover">
<tr>
<th>选择</th>
<th>业务编码</th>
<th>设备配置信息</th>
<th>客户名称</th>
</tr>
</table>
</div>
</div>

</body>
</html>
